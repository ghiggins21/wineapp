{% extends 'base.html' %}
{% load static %}
{% load querystring from django_tables2 %}
{% load render_table from django_tables2 %}
{% load bootstrap4 %}
{% load widget_tweaks %}

{% block content %}

<link rel="stylesheet" type="text/css" href="{% static 'css/forms.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">

  <form method="get">
    {% csrf_token %}
    <div class="well">
      <h1 style="color:red; font-size:50px; font-family: Times New Roman, Times, serif;"><b>Filter Wines</b></h1>
        <div class="form-row">
          <div class="form-group col-sm-4 col-md-3">
            {{ filter.form.name.label_tag }}
            {% render_field filter.form.name class="form-control" %}
          </div>
          <div class="form-group col-sm-4 col-md-3">
            {{ filter.form.winery.label_tag }}
            {% render_field filter.form.winery class="form-control" %}
          </div>
          <div class="form-group col-sm-4 col-md-3">
            {{ filter.form.region.label_tag }}
            {% render_field filter.form.region class="form-control" %}
          </div>
          <div class="form-group col-sm-4 col-md-3">
            {{ filter.form.country.label_tag }}
            {% render_field filter.form.country class="form-control" %}
          </div>
        </div>
        <div class="form-row">
          <div class="form-group col-sm-4 col-md-3">
            {{ filter.form.vintage.label_tag }}
            {% render_field filter.form.vintage class="form-control" %}
          </div>
          <div class="form-group col-sm-4 col-md-3">
            {{ filter.form.bottle.label_tag }}
            {% render_field filter.form.bottle class="form-control" %}
          </div>
          <div class="form-group col-sm-4 col-md-3">
            {{ filter.form.rating.label_tag }}<br>
            {% render_field filter.form.rating class="form-control" %}
          </div>
          <div class="form-group col-sm-4 col-md-3">
           {{ filter.form.type.label_tag }}
           {% render_field filter.form.type class="form-control" %}
         </div>
        </div>
        <div class="form-row">
         <div class="form-group col-sm-4 col-md-3">
           {{ filter.form.bought_from.label_tag }}
           {% render_field filter.form.bought_from class="form-control" %}
         </div>
         <div class="form-group col-sm-4 col-md-3">
           {{ filter.form.price.label_tag }}
           {% render_field filter.form.price class="form-control" %}
         </div>
         <div class="form-group col-sm-4 col-md-3">
           {{ filter.form.abv.label_tag }}
           {% render_field filter.form.abv class="form-control" %}
         </div>
        </div>
       <div class="form-row h-50">
         <div class="form-group col-md-4 mb-0 h-50">
           {{ filter.form.grapes.label_tag }}
           {% render_field filter.form.grapes class="form-control" %}
         </div>
      </div>
      <button type="submit" class="btn btn-primary form-group col-md-1 col-md-1">
        <span class="glyphicon glyphicon-search"></span> Search
      </button>
      {% if has_filter %}
        <a href="{%  url 'wine_filter' %}">Clear all filters</a>
      {% endif %}
    </div>
  </form>

  {% if table.page %}
    <div class="table-container">
  {% endif %}

  {% block table %}
      <div class="table-responsive">
          <table class="table table-hover table-striped"{% if table.attrs %} {{ table.attrs.as_html }}{% endif %}>

              {% block table.thead %}
                <thead>
                  <tr>
                    {% for column in table.columns %}
                        {% if column.orderable %}
                        <th {{ column.attrs.th.as_html }}><a href="{% querystring table.prefixed_order_by_field=column.order_by_alias.next %}">{{ column.header|title }}</a></th>
                        {% else %}
                        <th {{ column.attrs.th.as_html }}>{{ column.header|title }}</th>
                        {% endif %}
                    {% endfor %}
                  </tr>
                </thead>
              {% endblock table.thead %}

              {% block table.tbody %}
                <tbody>
                    {% for row in table.page.object_list|default:table.rows %} {# support pagination #}
                      {% block table.tbody.row %}
                        <tr class="{% cycle "odd" "even" %}">
                            {% for column, cell in row.items %}
                                <td {{ column.attrs.td.as_html }}>{{ cell }}</td> {{ name.get_absolute_url }}
                            {% endfor %}
                        </tr>
                      {% endblock table.tbody.row %}
                      {% empty %}
                        {% if table.empty_text %}
                        {% block table.tbody.empty_text %}
                        <tr><td colspan="{{ table.columns|length }}">{{ table.empty_text }}</td></tr>
                    {% endblock table.tbody.empty_text %}
                      {% endif %}
                    {% endfor %}
                </tbody>
              {% endblock table.tbody %}

              {% block table.tfoot %}
              <tfoot></tfoot>
              {% endblock table.tfoot %}

          </table>
      </div>
  {% endblock table %}

  {% if table.page %}
      {% block pagination %}
          {% bootstrap_pagination table.page url=request.get_full_path %}
  {% endblock pagination %}
    </div>
  {% endif %}
{% endblock %}

<script type="text/javascript" src="{% url 'java-script-catalog' %}"></script>
